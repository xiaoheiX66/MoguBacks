{"remainingRequest":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\src\\views\\manager\\user\\ListUser.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\src\\views\\manager\\user\\ListUser.vue","mtime":1648796577597},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZToiTGlzdEdvb2RzIiwNCiAgICAgZGF0YSgpIHsNCiAgICAgICAgY29uc3Qge3BhZ2U9MSxzaXplPTV9ID0gdGhpcy4kcm91dGUucXVlcnk7DQogICAgICByZXR1cm4gew0KICAgICAgICB0YWJsZURhdGE6IFtdLA0KICAgICAgICB0b3RhbDowLA0KICAgICAgICBwYWdlLA0KICAgICAgICBzaXplLA0KICAgICAgICBkaWFsb2dGb3JtVmlzaWJsZTpmYWxzZSwNCiAgICAgICAgZm9ybTp7DQogICAgICAgICAgX2lkOiIiLA0KICAgICAgICAgIHVzZXJuYW1lOiIiLA0KICAgICAgICAgIHBhc3N3b3JkOiIiDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgICBjcmVhdGVkKCl7DQogICAgICAgIHRoaXMuZ2V0VXNlckluZm9zKCk7DQogICAgfSwNCiAgICAgbWV0aG9kczogew0KICAgICAgdGFibGVSb3dDbGFzc05hbWUoeyByb3dJbmRleH0pIHsNCiAgICAgICAgaWYgKHJvd0luZGV4ID09PSAxKSB7DQogICAgICAgICAgcmV0dXJuICd3YXJuaW5nLXJvdyc7DQogICAgICAgIH0gZWxzZSBpZiAocm93SW5kZXggPT09IDMpIHsNCiAgICAgICAgICByZXR1cm4gJ3N1Y2Nlc3Mtcm93JzsNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gJyc7DQogICAgICB9LA0KICAgICAgYXN5bmMgZ2V0VXNlckluZm9zKCl7DQogICAgICAgICAgY29uc3Qge2RhdGF9ID0gYXdhaXQgdGhpcy4kcmVxdWVzdC5nZXQoIi91c2VyL21vcmVMaXN0Iix7cGFyYW1zOntwYWdlOnRoaXMucGFnZSxzaXplOnRoaXMuc2l6ZX19KQ0KICAgICAgICAgICAgY29uc29sZS5sb2coImRhdGEiLGRhdGEpOw0KICAgICAgICAgICAgY29uc3Qge3RvdGFsLG1zZ309IGRhdGENCiAgICAgICAgICAgIHRoaXMudGFibGVEYXRhID0gbXNnOw0KICAgICAgICAgICAgdGhpcy50b3RhbCA9dG90YWw7DQogICAgICAgICAgICAvLyBjb25zb2xlLmxvZygidGhpcy50YWJsZWRhdGEiLHRoaXMudGFibGVEYXRhKTsNCiAgICAgIH0sDQogICAgIGRlbHNpbmdsZShpZCkgew0KICAgICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6Xmlofku7YsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuJHJlcXVlc3QuZGVsZXRlKCIvdXNlci8iK2lkKQ0KICAgICAgICAgIGNvbnNvbGUubG9nKCJkYXRh5Yig6Zmk57uT5p6cIixkYXRhKTsNCiAgICAgICAgICBpZihkYXRhLmNvZGU9PT0yMDApew0KICAgICAgICAgICAgY29uc29sZS5sb2coIuWIoOmZpOaIkOWKnyIpOw0KICAgICAgICAgIH0NCiAgICAgICAgICAgc2V0VGltZW91dCgoKT0+e3RoaXMuZ2V0VXNlckluZm9zKCl9LDEwMCkgIA0KICAgICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScNCiAgICAgICAgICB9KTsgICAgICANCiAgICAgICAgfSkuY2F0Y2goKCk9PnsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKHttZXNzYWdlOiLliKDpmaTlpLHotKUifSkNCiAgICAgICAgfSkNCiAgICAgICAgDQogICAgICB9LA0KICAgICAgZ290byhfaWQpew0KICAgICAgICBjb25zb2xlLmxvZygiaWQiLF9pZCk7DQogICAgICAgICAgLy8gdGhpcy4kcm91dGVyLnB1c2goIi9tYW5hZ2VyL3VzZXIvZWRpdFVzZXI/aWQ9IitpZCkNCiAgICAgICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gIXRoaXMuZGlhbG9nRm9ybVZpc2libGUNCiAgICAgICAgICB0aGlzLiRyZXF1ZXN0LmdldCgiL3VzZXIvIitfaWQpLnRoZW4oKHtkYXRhfSk9PnsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCLljZXkuKrkurrkv6Hmga8iLGRhdGEpOw0KICAgICAgICAgICAgdGhpcy5mb3JtLl9pZCA9IGRhdGEuaW5mb1swXS5faWQNCiAgICAgICAgICAgIHRoaXMuZm9ybS51c2VybmFtZSA9IGRhdGEuaW5mb1swXS51c2VybmFtZQ0KICAgICAgICAgICAgdGhpcy5mb3JtLnBhc3N3b3JkID0gZGF0YS5pbmZvWzBdLnBhc3N3b3JkDQogICAgICAgICAgfSkuY2F0Y2goKGVycik9Pntjb25zb2xlLmxvZyhlcnIpO30pDQogICAgICAgIC8vIGNvbnNvbGUubG9nKCJpZCIsaWQpOw0KICAgICAgfSwNCiAgICAgIGNoYW5nZVNpemUoc2l6ZSl7DQogICAgICAgIHRoaXMuc2l6ZSA9IHNpemU7DQogICAgICAgIHRoaXMuZ2V0VXNlckluZm9zKCk7DQogICAgICAgIC8vIHRoaXMuJHJvdXRlLnF1ZXJ5LnNpemUgPSBzaXplOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7DQogICAgICAgICAgICAvLyBwYXRoOicvbWFuYWdlL2dvb2RzL2xpc3QnLA0KICAgICAgICAgICAgcXVlcnk6ey4uLnRoaXMuJHJvdXRlLnF1ZXJ5LHNpemV9DQogICAgICAgIH0pDQogICAgfSwNCiAgICBjaGFuZ2VQYWdlKHBhZ2Upew0KICAgICAgICB0aGlzLnBhZ2UgPSBwYWdlDQogICAgICAgIHRoaXMuZ2V0VXNlckluZm9zKCk7DQogICAgICAgIHRoaXMuJHJvdXRlci5yZXBsYWNlKHsNCiAgICAgICAgICAgIC8vIHBhdGg6Jy9tYW5hZ2UvZ29vZHMvbGlzdCcsDQogICAgICAgICAgICBxdWVyeTp7Li4udGhpcy4kcm91dGUucXVlcnkscGFnZX0NCiAgICAgICAgfSkNCiAgICB9LA0KICAgIHN1cmVUb0VkaXQodmFsdWVzKXsNCiAgICAgIGNvbnN0IGlkID0gdmFsdWVzLl9pZA0KICAgICAgY29uc3QgdXNlcm5hbWUgPSB2YWx1ZXMudXNlcm5hbWUNCiAgICAgIGNvbnN0IHBhc3N3b3JkID0gdmFsdWVzLnBhc3N3b3JkDQogICAgICBjb25zb2xlLmxvZygi5o+Q5Lqk55qE5pWw5o2uIix2YWx1ZXMpOw0KICAgICAgdGhpcy4kcmVxdWVzdC5wdXQoIi91c2VyLyIraWQse3VzZXJuYW1lLHBhc3N3b3JkfSkudGhlbigoe2RhdGF9KT0+ew0KICAgICAgICBjb25zb2xlLmxvZygi5pu05paw57uT5p6cIixkYXRhKTsNCiAgICAgICAgaWYoZGF0YS5jb2RlPT09MjAwKXsNCiAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIuabtOaWsOaIkOWKnyIpDQogICAgICAgIH1lbHNlew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuabtOaWsOWksei0pSIpDQogICAgICAgIH0NCiAgICAgIH0pLmNhdGNoKChlcnIpPT57Y29uc29sZS5sb2coZXJyKTt9KQ0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlDQogICAgICBzZXRUaW1lb3V0KCgpPT57dGhpcy5nZXRVc2VySW5mb3MoKX0sNTAwKQ0KICAgIH0NCiAgICB9LA0KfQ0K"},{"version":3,"sources":["ListUser.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ListUser.vue","sourceRoot":"src/views/manager/user","sourcesContent":["<template>\r\n    <div class=\"home\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n        <el-breadcrumb-item :to=\"{ path: '/' }\">管理首页</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户管理</el-breadcrumb-item>\r\n        <el-breadcrumb-item>用户列表</el-breadcrumb-item>\r\n</el-breadcrumb>\r\n    <el-row :gutter=\"20\" style=\"margin-top:30px\">\r\n  <el-col :span=\"12\" style=\"text-align:left;\">\r\n      <el-button type=\"primary\" style=\"font-size:18px;width:150px\" @click=\"$router.push('/manager/user/addUser')\">添加</el-button>\r\n      </el-col>\r\n  <el-col :span=\"12\" style=\"text-align:right\">\r\n       <el-button type=\"danger\" style=\"font-size:18px;width:150px\">批量删除</el-button>\r\n     </el-col>\r\n</el-row>\r\n<!-- 列表 -->\r\n    <el-table\r\n   :data=\"tableData\"\r\n    style=\"width: 100%;margin-top:70px\"\r\n    :row-class-name=\"tableRowClassName\">\r\n    <el-table-column type=\"selection\"></el-table-column>\r\n      <el-table-column label=\"#\" type=\"index\" class=\"indexFrom\"></el-table-column>\r\n    <el-table-column\r\n      prop=\"date\"\r\n      label=\"创建日期\"\r\n      width=\"180\">\r\n      2021/1/22\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"username\"\r\n      label=\"用户名\"\r\n      width=\"180\">\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"password\"\r\n      label=\"密码\"\r\n      width=\"180\">******\r\n    </el-table-column>\r\n    <el-table-column\r\n      prop=\"controls\"\r\n      label=\"操作\" v-slot=\"{row}\">\r\n      <el-button type=\"primary\" style=\"width:80px;font-size:18px\" @click=\"goto(row._id)\">编辑</el-button>\r\n      <el-button type=\"danger\" @click=\"delsingle(row._id)\" style=\"width:80px;font-size:18px\">删除</el-button>\r\n    </el-table-column>\r\n  </el-table>\r\n   <!-- 点击弹出内容 -->\r\n    <el-dialog title=\"账户详情\" :visible.sync=\"dialogFormVisible\" style=\"marginTop:'20px'\">\r\n  <el-form :model=\"form\">\r\n    <el-form-item label=\"账户ID\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form._id\" autocomplete=\"off\" placeholder=\"账户ID\" disabled></el-input>\r\n    </el-form-item>\r\n     <el-form-item label=\"账户名称\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.username\" autocomplete=\"off\" placeholder=\"账户名称\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"账户密码\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.password\" autocomplete=\"off\" placeholder=\"账户密码\"></el-input>\r\n    </el-form-item>\r\n  </el-form>\r\n  <div slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"dialogFormVisible = false\">取 消 编 辑</el-button>\r\n    <el-button type=\"primary\" @click=\"sureToEdit(form)\">确 定 编 辑</el-button>\r\n  </div>\r\n</el-dialog>\r\n  <!-- 分页器 -->\r\n   <el-pagination\r\n      @size-change=\"changeSize\"\r\n      @current-change=\"changePage\"\r\n      :current-page=\"page*1\"\r\n      :page-sizes=\"[5, 10, 15, 30, 50]\"\r\n      :page-size=\"size\"\r\n      layout=\"total, prev, pager, next, sizes\"\r\n      :total=\"total\" style=\"margin-top:30px;float:left\">\r\n    </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"ListGoods\",\r\n     data() {\r\n        const {page=1,size=5} = this.$route.query;\r\n      return {\r\n        tableData: [],\r\n        total:0,\r\n        page,\r\n        size,\r\n        dialogFormVisible:false,\r\n        form:{\r\n          _id:\"\",\r\n          username:\"\",\r\n          password:\"\"\r\n        }\r\n      }\r\n    },\r\n     created(){\r\n        this.getUserInfos();\r\n    },\r\n     methods: {\r\n      tableRowClassName({ rowIndex}) {\r\n        if (rowIndex === 1) {\r\n          return 'warning-row';\r\n        } else if (rowIndex === 3) {\r\n          return 'success-row';\r\n        }\r\n        return '';\r\n      },\r\n      async getUserInfos(){\r\n          const {data} = await this.$request.get(\"/user/moreList\",{params:{page:this.page,size:this.size}})\r\n            console.log(\"data\",data);\r\n            const {total,msg}= data\r\n            this.tableData = msg;\r\n            this.total =total;\r\n            // console.log(\"this.tabledata\",this.tableData);\r\n      },\r\n     delsingle(id) {\r\n        this.$confirm('此操作将永久删除该文件, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          const data = this.$request.delete(\"/user/\"+id)\r\n          console.log(\"data删除结果\",data);\r\n          if(data.code===200){\r\n            console.log(\"删除成功\");\r\n          }\r\n           setTimeout(()=>{this.getUserInfos()},100)  \r\n            this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });      \r\n        }).catch(()=>{\r\n          this.$message.error({message:\"删除失败\"})\r\n        })\r\n        \r\n      },\r\n      goto(_id){\r\n        console.log(\"id\",_id);\r\n          // this.$router.push(\"/manager/user/editUser?id=\"+id)\r\n          this.dialogFormVisible = !this.dialogFormVisible\r\n          this.$request.get(\"/user/\"+_id).then(({data})=>{\r\n            console.log(\"单个人信息\",data);\r\n            this.form._id = data.info[0]._id\r\n            this.form.username = data.info[0].username\r\n            this.form.password = data.info[0].password\r\n          }).catch((err)=>{console.log(err);})\r\n        // console.log(\"id\",id);\r\n      },\r\n      changeSize(size){\r\n        this.size = size;\r\n        this.getUserInfos();\r\n        // this.$route.query.size = size;\r\n        this.$router.replace({\r\n            // path:'/manage/goods/list',\r\n            query:{...this.$route.query,size}\r\n        })\r\n    },\r\n    changePage(page){\r\n        this.page = page\r\n        this.getUserInfos();\r\n        this.$router.replace({\r\n            // path:'/manage/goods/list',\r\n            query:{...this.$route.query,page}\r\n        })\r\n    },\r\n    sureToEdit(values){\r\n      const id = values._id\r\n      const username = values.username\r\n      const password = values.password\r\n      console.log(\"提交的数据\",values);\r\n      this.$request.put(\"/user/\"+id,{username,password}).then(({data})=>{\r\n        console.log(\"更新结果\",data);\r\n        if(data.code===200){\r\n          this.$message.success(\"更新成功\")\r\n        }else{\r\n          this.$message.error(\"更新失败\")\r\n        }\r\n      }).catch((err)=>{console.log(err);})\r\n      this.dialogFormVisible = false\r\n      setTimeout(()=>{this.getUserInfos()},500)\r\n    }\r\n    },\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n .el-table .warning-row {\r\n    background: oldlace;\r\n  }\r\n\r\n  .el-table .success-row {\r\n    background: #f0f9eb;\r\n  }\r\n</style>"]}]}