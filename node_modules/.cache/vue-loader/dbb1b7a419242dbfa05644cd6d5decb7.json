{"remainingRequest":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\src\\views\\manager\\goods\\List.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\src\\views\\manager\\goods\\List.vue","mtime":1642682651477},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQpleHBvcnQgZGVmYXVsdCB7DQogICAgbmFtZToiTGlzdEdvb2RzIiwNCiAgICBkYXRhKCl7DQogICAgICAgICBjb25zdCB7cGFnZT0xLHNpemU9MTB9ID0gdGhpcy4kcm91dGUucXVlcnk7DQogICAgICAgIHJldHVybnsNCiAgICAgICAgICAgIHRhYmxlRGF0YTpbXSwNCiAgICAgICAgICAgIGlzVW5kZXJDYXJyaWdlOnRydWUsDQogICAgICAgICAgICBzZWFyY2hSZXN1bHQ6W10sDQogICAgICAgICAgICBuZXdJbmZvc0FsbDpbXSwNCiAgICAgICAgICAgIHBhZ2UsDQogICAgICAgICAgICBzaXplLA0KICAgICAgICAgICAgdG90YWw6MCwNCiAgICAgICAgICAgIGlucHV0MjonJywNCiAgICAgICAgfQ0KICAgIH0sDQogICAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLmdldERhdGEoKTsNCiAgfSwNCiAgbWV0aG9kczogew0KICAgIGFzeW5jIGdldERhdGEoKSB7DQogICAgICBjb25zdCB7IGRhdGEgfSA9IGF3YWl0IHRoaXMuJHJlcXVlc3QuZ2V0KCIvZ29vZHMvbGlzdCIsIHsNCiAgICAgICAgcGFyYW1zOiB7DQogICAgICAgICAgcGFnZTogdGhpcy5wYWdlLA0KICAgICAgICAgIHNpemU6IHRoaXMuc2l6ZQ0KICAgICAgICB9DQogICAgICB9KTsNCi8vIGNvbnNvbGUubG9nKCJkYXRhIixkYXRhKTsNCiAgICAgIGNvbnN0IHsgbXNnLCB0b3RhbCB9ID0gZGF0YTsNCg0KICAgICAgdGhpcy50YWJsZURhdGEgPSBtc2c7DQogICAgICB0aGlzLnRvdGFsID0gdG90YWw7DQogICAgICAvLyBjb25zb2xlLmxvZygidGFiYWxlZGF0YSIsdGhpcy50YWJsZURhdGEpOw0KICAgIH0sDQogICAgY2hhbmdlU2l6ZShzaXplKXsNCiAgICAgICAgdGhpcy5zaXplID0gc2l6ZTsNCiAgICAgICAgdGhpcy5nZXREYXRhKCk7DQogICAgICAgIC8vIHRoaXMuJHJvdXRlLnF1ZXJ5LnNpemUgPSBzaXplOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7DQogICAgICAgICAgICAvLyBwYXRoOicvbWFuYWdlL2dvb2RzL2xpc3QnLA0KICAgICAgICAgICAgcXVlcnk6ey4uLnRoaXMuJHJvdXRlLnF1ZXJ5LHNpemV9DQogICAgICAgIH0pDQogICAgfSwNCiAgIHNob3dpbmRleChpbmRleCl7DQogICAgIGNvbnNvbGUubG9nKCJpbmRleCIsaW5kZXgpOw0KICAgfSwNCiAgICBjaGFuZ2VQYWdlKHBhZ2Upew0KICAgICAgICB0aGlzLnBhZ2UgPSBwYWdlDQogICAgICAgIHRoaXMuZ2V0RGF0YSgpOw0KICAgICAgICB0aGlzLiRyb3V0ZXIucmVwbGFjZSh7DQogICAgICAgICAgICAvLyBwYXRoOicvbWFuYWdlL2dvb2RzL2xpc3QnLA0KICAgICAgICAgICAgcXVlcnk6ey4uLnRoaXMuJHJvdXRlLnF1ZXJ5LHBhZ2V9DQogICAgICAgIH0pDQogICAgfSwNCiAgICAgaXNkZWxldGUoaWQpIHsNCiAgICAgICAgdGhpcy4kY29uZmlybSgn5LiN6KaB5a6d5a6d5LqG5ZCXPycsICfmj5DnpLonLCB7DQogICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLA0KICAgICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgICB9KS50aGVuKCgpID0+IHsNCiAgICAgICAgICAvLyDliKDpmaQNCiAgICAgICAgICBjb25zb2xlLmxvZygiaWQiLGlkKTsNCiAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMuJHJlcXVlc3QuZGVsZXRlKCIvZ29vZHMvIitpZCkNCiAgICAgICAgLy8gY29uc29sZS5sb2coIueCueWHu+aDs+imgeWIoOmZpOeahGlzZGF0YSIsZGF0YSk7DQogICAgICAgIGlmKGRhdGEuY29kZT09PTIwMCl7DQogICAgICAgICAgIGNvbnNvbGUubG9nKCLliKDpmaTmiJDlip8iKTsNCiAgICAgICAgfQ0KICAgICAgICBzZXRUaW1lb3V0KCgpPT57IHRoaXMuZ2V0RGF0YSgpO30sMTAwKQ0KICAgICAgICAgdGhpcy4kbWVzc2FnZSh7DQogICAgICAgICAgICB0eXBlOiAnc3VjY2VzcycsDQogICAgICAgICAgICBtZXNzYWdlOiAn5Yig6Zmk5oiQ5YqfIScNCiAgICAgICAgICB9KTsNCiAgICAgICAgfSkuY2F0Y2goKCk9PnsNCiAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcih7bWVzc2FnZToi5Yig6Zmk5aSx6LSlISJ9KQ0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIGdvdG8oaWQpew0KICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgiL21hbmFnZXIvZ29vZHMvZWRpdD9pZD0iK2lkKQ0KICAgICAgfSwNCiAgICAgIC8vIOS4iuS4i+aetg0KICAgICAgYXN5bmMgY2hhbmdlU3RhdGVCdShpZCl7DQogICAgICAgIHRoaXMuaXNVbmRlckNhcnJpZ2UgPSAhdGhpcy5pc1VuZGVyQ2FycmlnZQ0KICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgdGhpcy4kcmVxdWVzdC5wYXRjaCgiL2dvb2RzL3BhdGNocy8iK2lkLHtoYXNTaW1pbGFyaXR5OnRoaXMuaXNVbmRlckNhcnJpZ2V9KQ0KICAgICAgICBzZXRUaW1lb3V0KCgpPT57dGhpcy5nZXREYXRhKCl9LDEwMCkNCiAgICAgICAgY29uc29sZS5sb2coIuW9k+WJjWlk5YC8IixpZCk7DQogICAgICAgIGNvbnNvbGUubG9nKCLkuIrkuIvmnrYiLGRhdGEpOw0KICAgICAgfSwNCiAgICAgIC8vIOaQnOe0og0KICAgICAgc2VhcmNoQWN0aW9uKCl7DQogICAgICAgIGNvbnN0IGlucHV0VmFsdWUgPSB0aGlzLmlucHV0MjsNCiAgICAgICAgdGhpcy5uZXdJbmZvc0FsbCA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oJ2RhdGFsaXN0YWxsJykpDQogICAgICAgIHRoaXMuc2VhcmNoUmVzdWx0ID0gdGhpcy5uZXdJbmZvc0FsbC5maWx0ZXIoKGl0ZW0pPT57DQogICAgICAgICAgLy8gY29uc29sZS5sb2coIuWtkOWFg+e0oCIsdHlwZW9mKGl0ZW0udGl0bGUpKTsNCiAgICAgICAgICBpZihpdGVtLnRpdGxlLmluY2x1ZGVzKGlucHV0VmFsdWUpKXsNCiAgICAgICAgICAgIHJldHVybiBpdGVtOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgICAgdGhpcy50YWJsZURhdGEgPSB0aGlzLnNlYXJjaFJlc3VsdDsNCiAgICAgICAgdGhpcy5pbnB1dDI9IiINCiAgICAgICAgY29uc29sZS5sb2coIuaQnOe0ouWQjueahOe7k+aenCIsdGhpcy5zZWFyY2hSZXN1bHQpOw0KICAgICAgfQ0KICB9DQp9DQo="},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/manager/goods","sourcesContent":["<template>\r\n    <div class=\"home\" style=\"padding:10px 30px 0px 10px\">\r\n      <div class=\"extraTabs\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">管理首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <div class=\"searchBox\">\r\n      <el-row :gutter=\"20\">\r\n    <el-col :span=\"9\">\r\n      <div class=\"grid-content bg-purple\" style=\"margin-top: 10px;\">\r\n  <el-input placeholder=\"请输入内容\" v-model=\"input2\" @change=\"searchAction($event)\">\r\n    <template slot=\"append\">搜索</template>\r\n  </el-input>\r\n      </div></el-col>\r\n    <el-col :span=\"12\" style=\"margin-top: 10px;float:right\">\r\n     <el-button class=\"changeButton\" type=\"primary\" plain round>导入</el-button>\r\n     <el-button class=\"changeButton\" type=\"primary\" plain round>导出</el-button>\r\n     <el-button class=\"changeButton\" type=\"primary\" round>批量上架</el-button>\r\n     <el-button class=\"changeButton\" type=\"primary\" round>批量下架</el-button>\r\n     <el-button class=\"changeButton\" type=\"danger\" round>批量删除</el-button>\r\n      <div class=\"grid-content bg-purple\">\r\n      \r\n      </div></el-col>\r\n  </el-row>\r\n    </div>\r\n      </div>\r\n         <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%;\">\r\n     <template>\r\n        <el-table-column type=\"selection\"></el-table-column>\r\n      <el-table-column label=\"#\" type=\"index\" class=\"indexFrom\"></el-table-column>\r\n      <el-table-column\r\n        width=\"120\"\r\n        prop=\"img\"\r\n        label=\"图片\"\r\n        v-slot=\"{row}\"\r\n    >\r\n        <el-image\r\n        style=\"width: 60px; height: 60px\"\r\n        :src=\"row.img\"></el-image>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"title\"\r\n        label=\"商品信息\"\r\n        v-slot=\"{row}\"\r\n        >\r\n        <h5>{{row.title}}</h5>\r\n        <p class=\"price\"><del>￥999</del><span class=\"price11\">￥{{row.price}}</span></p>\r\n      </el-table-column>\r\n      <el-table-column \r\n      label=\"____是否上架\"\r\n      v-slot=\"{row}\"\r\n      class=\"isShangjia\"\r\n      width=\"420\"\r\n      >\r\n        <p style=\"margin-left:60px\">{{row.hasSimilarity?\"售卖中\":\"已下架\"}}</p>\r\n        <el-button type=\"primary\" size=\"50px\" style=\"margin-left:60px\" @click=\"changeStateBu(row._id)\">{{isUnderCarrige?\"上架\":\"下架\"}}</el-button>\r\n      </el-table-column>\r\n       <el-table-column \r\n       label=\"销量\"\r\n       v-slot=\"{row}\"\r\n       >\r\n       <p>{{row.cfav}}</p>\r\n       </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        width=\"280\" style=\"display:flex;\" v-slot=\"{row}\">\r\n          <el-row class=\"controlSs\"  >\r\n            <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit-outline\" @click=\"goto(row._id)\">编辑</el-button>\r\n        <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\" @click=\"isdelete(row._id)\">删除</el-button></el-row>\r\n      </el-table-column>\r\n     </template>\r\n    </el-table>\r\n    <el-pagination\r\n      @size-change=\"changeSize\"\r\n      @current-change=\"changePage\"\r\n      :current-page=\"page*1\"\r\n      :page-sizes=\"[5, 10, 15, 30, 50]\"\r\n      :page-size=\"size\"\r\n      layout=\"total, prev, pager, next, sizes\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"ListGoods\",\r\n    data(){\r\n         const {page=1,size=10} = this.$route.query;\r\n        return{\r\n            tableData:[],\r\n            isUnderCarrige:true,\r\n            searchResult:[],\r\n            newInfosAll:[],\r\n            page,\r\n            size,\r\n            total:0,\r\n            input2:'',\r\n        }\r\n    },\r\n    created() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    async getData() {\r\n      const { data } = await this.$request.get(\"/goods/list\", {\r\n        params: {\r\n          page: this.page,\r\n          size: this.size\r\n        }\r\n      });\r\n// console.log(\"data\",data);\r\n      const { msg, total } = data;\r\n\r\n      this.tableData = msg;\r\n      this.total = total;\r\n      // console.log(\"tabaledata\",this.tableData);\r\n    },\r\n    changeSize(size){\r\n        this.size = size;\r\n        this.getData();\r\n        // this.$route.query.size = size;\r\n        this.$router.replace({\r\n            // path:'/manage/goods/list',\r\n            query:{...this.$route.query,size}\r\n        })\r\n    },\r\n   showindex(index){\r\n     console.log(\"index\",index);\r\n   },\r\n    changePage(page){\r\n        this.page = page\r\n        this.getData();\r\n        this.$router.replace({\r\n            // path:'/manage/goods/list',\r\n            query:{...this.$route.query,page}\r\n        })\r\n    },\r\n     isdelete(id) {\r\n        this.$confirm('不要宝宝了吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // 删除\r\n          console.log(\"id\",id);\r\n        const data = this.$request.delete(\"/goods/\"+id)\r\n        // console.log(\"点击想要删除的isdata\",data);\r\n        if(data.code===200){\r\n           console.log(\"删除成功\");\r\n        }\r\n        setTimeout(()=>{ this.getData();},100)\r\n         this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n        }).catch(()=>{\r\n           this.$message.error({message:\"删除失败!\"})\r\n        })\r\n      },\r\n      goto(id){\r\n        this.$router.push(\"/manager/goods/edit?id=\"+id)\r\n      },\r\n      // 上下架\r\n      async changeStateBu(id){\r\n        this.isUnderCarrige = !this.isUnderCarrige\r\n        const data = await this.$request.patch(\"/goods/patchs/\"+id,{hasSimilarity:this.isUnderCarrige})\r\n        setTimeout(()=>{this.getData()},100)\r\n        console.log(\"当前id值\",id);\r\n        console.log(\"上下架\",data);\r\n      },\r\n      // 搜索\r\n      searchAction(){\r\n        const inputValue = this.input2;\r\n        this.newInfosAll = JSON.parse(localStorage.getItem('datalistall'))\r\n        this.searchResult = this.newInfosAll.filter((item)=>{\r\n          // console.log(\"子元素\",typeof(item.title));\r\n          if(item.title.includes(inputValue)){\r\n            return item;\r\n          }\r\n        })\r\n        this.tableData = this.searchResult;\r\n        this.input2=\"\"\r\n        console.log(\"搜索后的结果\",this.searchResult);\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home{\r\n    width: 93%;\r\n    font-family: \"宋体\";\r\n    .controlSs{\r\n        display: flex;\r\n        margin-right: 24px;\r\n    }\r\n    .price11{\r\n        color: red;\r\n        font-family: \"宋体\";\r\n        font-weight: bold;\r\n    }\r\n    .extraTabs{\r\n      height: 86px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .searchBox{\r\n        flex: 1;\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n    .changeButton{\r\n      width: 127px;\r\n    }\r\n}\r\n</style>"]}]}