{"remainingRequest":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\src\\views\\manager\\goods\\List.vue?vue&type=style&index=0&id=015df2da&lang=scss&scoped=true&","dependencies":[{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\src\\views\\manager\\goods\\List.vue","mtime":1648972932567},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\sass-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoNCi5ob21lew0KICAgIHdpZHRoOiA5MyU7DQogICAgZm9udC1mYW1pbHk6ICLlrovkvZMiOw0KICAgIC5jb250cm9sU3N7DQogICAgICAgIGRpc3BsYXk6IGZsZXg7DQogICAgICAgIG1hcmdpbi1yaWdodDogMjRweDsNCiAgICB9DQogICAgLnByaWNlMTF7DQogICAgICAgIGNvbG9yOiByZWQ7DQogICAgICAgIGZvbnQtZmFtaWx5OiAi5a6L5L2TIjsNCiAgICAgICAgZm9udC13ZWlnaHQ6IGJvbGQ7DQogICAgfQ0KICAgIC5leHRyYVRhYnN7DQogICAgICBoZWlnaHQ6IDg2cHg7DQogICAgICBkaXNwbGF5OiBmbGV4Ow0KICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsNCiAgICAgIC5zZWFyY2hCb3h7DQogICAgICAgIGZsZXg6IDE7DQogICAgICAgIG1hcmdpbi10b3A6IDEwcHg7DQogICAgICB9DQogICAgfQ0KICAgIC5jaGFuZ2VCdXR0b257DQogICAgICB3aWR0aDogMTI3cHg7DQogICAgfQ0KfQ0K"},{"version":3,"sources":["List.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"List.vue","sourceRoot":"src/views/manager/goods","sourcesContent":["<template>\r\n    <div class=\"home\" style=\"padding:10px 30px 0px 10px\">\r\n      <div class=\"extraTabs\">\r\n        <el-breadcrumb separator-class=\"el-icon-arrow-right\">\r\n      <el-breadcrumb-item :to=\"{ path: '/' }\">管理首页</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品管理</el-breadcrumb-item>\r\n      <el-breadcrumb-item>商品列表</el-breadcrumb-item>\r\n    </el-breadcrumb>\r\n    <div class=\"searchBox\">\r\n      <el-row :gutter=\"20\">\r\n    <el-col :span=\"9\">\r\n      <div class=\"grid-content bg-purple\" style=\"margin-top: 10px;\">\r\n  <el-input placeholder=\"请输入内容\" v-model=\"input2\" @change=\"searchAction($event)\">\r\n    <template slot=\"append\" ><el-button type=\"primary\"  class=\"changeButton\">搜索</el-button></template>\r\n  </el-input>\r\n      </div></el-col>\r\n    <el-col :span=\"12\" style=\"margin-top: 10px;float:right\">\r\n     <el-button class=\"changeButton\" type=\"primary\" plain round disabled>导入</el-button>\r\n     <el-button class=\"changeButton\" type=\"primary\" plain round disabled>导出</el-button>\r\n     <el-button class=\"changeButton\" type=\"primary\" round disabled>批量上架</el-button>\r\n     <el-button class=\"changeButton\" type=\"primary\" round disabled>批量下架</el-button>\r\n     <el-button class=\"changeButton\" type=\"danger\" round disabled>批量删除</el-button>\r\n      <div class=\"grid-content bg-purple\">\r\n      \r\n      </div></el-col>\r\n  </el-row>\r\n    </div>\r\n      </div>\r\n         <el-table\r\n      :data=\"tableData\"\r\n      style=\"width: 100%;\">\r\n     <template>\r\n        <el-table-column type=\"selection\"></el-table-column>\r\n      <el-table-column label=\"#\" type=\"index\" class=\"indexFrom\"></el-table-column>\r\n      <el-table-column\r\n        width=\"120\"\r\n        prop=\"img\"\r\n        label=\"图片\"\r\n        v-slot=\"{row}\"\r\n    >\r\n        <el-image\r\n        style=\"width: 60px; height: 60px\"\r\n        :src=\"row.img\"></el-image>\r\n      </el-table-column>\r\n      <el-table-column\r\n        prop=\"title\"\r\n        label=\"商品信息\"\r\n        v-slot=\"{row}\"\r\n        >\r\n        <h5>{{row.title}}</h5>\r\n        <p class=\"price\"><del>￥999</del><span class=\"price11\">￥{{row.price}}</span></p>\r\n      </el-table-column>\r\n      <el-table-column \r\n      label=\"____是否上架\"\r\n      v-slot=\"{row}\"\r\n      class=\"isShangjia\"\r\n      width=\"420\"\r\n      >\r\n        <p style=\"margin-left:60px\">{{row.hasSimilarity?\"售卖中\":\"已下架\"}}</p>\r\n        <el-button type=\"primary\" size=\"50px\" style=\"margin-left:60px\" @click=\"changeStateBu(row._id)\">{{isUnderCarrige?\"上架\":\"下架\"}}</el-button>\r\n      </el-table-column>\r\n       <el-table-column \r\n       label=\"已售\"\r\n       v-slot=\"{row}\"\r\n       >\r\n       <p>{{row.sale}}</p>\r\n       </el-table-column>\r\n      <el-table-column\r\n        label=\"操作\"\r\n        width=\"280\" style=\"display:flex;\" v-slot=\"{row}\">\r\n          <el-row class=\"controlSs\"  >\r\n            <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-edit-outline\" @click=\"goto(row._id)\">编辑</el-button>\r\n        <el-button type=\"danger\" size=\"mini\" icon=\"el-icon-delete\" @click=\"isdelete(row._id)\">删除</el-button></el-row>\r\n      </el-table-column>\r\n     </template>\r\n    </el-table>\r\n    <!-- 点击弹出内容 -->\r\n    <el-dialog title=\"收货地址\" :visible.sync=\"dialogFormVisible\" style=\"marginTop:'20px'\">\r\n  <el-form :model=\"form\">\r\n    <el-form-item label=\"商品名称\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.title\" autocomplete=\"off\" placeholder=\"商品名称\"></el-input>\r\n    </el-form-item>\r\n     <el-form-item label=\"商品分类\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.category\" autocomplete=\"off\" placeholder=\"商品分类\"></el-input>\r\n    </el-form-item>\r\n    <el-form-item label=\"图片地址\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.img\" type=\"textarea\" autocomplete=\"off\" placeholder=\"图片地址\"></el-input>\r\n    </el-form-item>\r\n     <el-form-item label=\"现价/原价/销量/已售\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.formalPrice\" autocomplete=\"off\" placeholder=\"原价\"></el-input>\r\n      <el-input v-model=\"form.price\" autocomplete=\"off\" placeholder=\"现价\"></el-input>\r\n      <el-input v-model=\"form.cfav\" autocomplete=\"off\" placeholder=\"销量\"></el-input>\r\n      <el-input v-model=\"form.sale\" autocomplete=\"off\" placeholder=\"已售\"></el-input>\r\n    </el-form-item>\r\n     <el-form-item label=\"商品描述\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.desc\" autocomplete=\"off\" placeholder=\"商品描述\"></el-input>\r\n    </el-form-item>\r\n     <el-form-item label=\"是否上架\" :label-width=\"formLabelWidth\">\r\n      <el-input v-model=\"form.hasSimilarity\" autocomplete=\"off\" placeholder=\"是否上架\"></el-input>\r\n    </el-form-item>\r\n  </el-form>\r\n  <div slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"dialogFormVisible = false\">取 消 编 辑</el-button>\r\n    <el-button type=\"primary\" @click=\"sureToEdit(form)\">确 定 编 辑</el-button>\r\n  </div>\r\n</el-dialog>\r\n    <el-pagination\r\n      @size-change=\"changeSize\"\r\n      @current-change=\"changePage\"\r\n      :current-page=\"page*1\"\r\n      :page-sizes=\"[5, 10, 15, 30, 50]\"\r\n      :page-size=\"size\"\r\n      layout=\"total, prev, pager, next, sizes\"\r\n      :total=\"total\">\r\n    </el-pagination>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    name:\"ListGoods\",\r\n    data(){\r\n         const {page=1,size=10} = this.$route.query;\r\n        return{\r\n            tableData:[],\r\n            isUnderCarrige:true,\r\n            dialogFormVisible:false,\r\n            searchResult:[],\r\n            newInfosAll:[],\r\n            page,\r\n            size,\r\n            total:0,\r\n            input2:'',\r\n             form: {\r\n               tradeItemId:7,\r\n         title:\"\",\r\n        img:\"\",\r\n        category: \"时尚clthes\",\r\n        itemtype: \"\",\r\n        hasSimilarity:false,\r\n        cfav:\"\",\r\n        price:\"\",\r\n        sale:\"\",\r\n        formalPrice:'￥999'\r\n        },\r\n        }\r\n    },\r\n    created() {\r\n    this.getData();\r\n  },\r\n  methods: {\r\n    async getData() {\r\n      const { data } = await this.$request.get(\"/goods/list\", {\r\n        params: {\r\n          page: this.page,\r\n          size: this.size\r\n        }\r\n      });\r\n// console.log(\"data\",data);\r\n      const { msg, total } = data;\r\n\r\n      this.tableData = msg;\r\n      this.total = total;\r\n      // console.log(\"tabaledata\",this.tableData);\r\n    },\r\n    changeSize(size){\r\n        this.size = size;\r\n        this.getData();\r\n        // this.$route.query.size = size;\r\n        this.$router.replace({\r\n            // path:'/manage/goods/list',\r\n            query:{...this.$route.query,size}\r\n        })\r\n    },\r\n   showindex(index){\r\n     console.log(\"index\",index);\r\n   },\r\n    changePage(page){\r\n        this.page = page\r\n        this.getData();\r\n        this.$router.replace({\r\n            // path:'/manage/goods/list',\r\n            query:{...this.$route.query,page}\r\n        })\r\n    },\r\n     isdelete(id) {\r\n        this.$confirm('不要宝宝了吗?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          // 删除\r\n          console.log(\"id\",id);\r\n        const data = this.$request.delete(\"/goods/\"+id)\r\n        // console.log(\"点击想要删除的isdata\",data);\r\n        if(data.code===200){\r\n           console.log(\"删除成功\");\r\n        }\r\n        setTimeout(()=>{ this.getData();},100)\r\n         this.$message({\r\n            type: 'success',\r\n            message: '删除成功!'\r\n          });\r\n        }).catch(()=>{\r\n           this.$message.error({message:\"删除失败!\"})\r\n        })\r\n      },\r\n      goto(id){\r\n        console.log(\"id\",id);\r\n        localStorage.setItem(\"singleupdateId\",JSON.stringify(id))\r\n        // this.$router.push(\"/manager/goods/edit?id=\"+id)\r\n        this.dialogFormVisible = !this.dialogFormVisible\r\n        this.$request.get(\"/goods/\"+id).then(({data})=>{\r\n          console.log(\"详情id\",data);\r\n          this.form.title = data.msg[0].title\r\n    this.form.desc = data.msg[0].tradeItemId\r\n    this.form.hasSimilarity = data.msg[0].hasSimilarity\r\n    this.form.cfav =data.msg[0].cfav\r\n    this.form.price =data.msg[0].price\r\n    this.form.sale =data.msg[0].sale\r\n    this.form.img = data.msg[0].img\r\n        }).catch((err)=>{console.log(err);})\r\n      },\r\n      // 上下架\r\n      async changeStateBu(id){\r\n        this.isUnderCarrige = !this.isUnderCarrige\r\n        const data = await this.$request.patch(\"/goods/patchs/\"+id,{hasSimilarity:this.isUnderCarrige})\r\n        setTimeout(()=>{this.getData()},100)\r\n        console.log(\"当前id值\",id);\r\n        console.log(\"上下架\",data);\r\n      },\r\n      // 搜索\r\n      searchAction(){\r\n        const inputValue = this.input2;\r\n        this.newInfosAll = JSON.parse(localStorage.getItem('datalistall'))\r\n        this.searchResult = this.newInfosAll.filter((item)=>{\r\n          // console.log(\"子元素\",typeof(item.title));\r\n          if(item.title.includes(inputValue)){\r\n            return item;\r\n          }\r\n        })\r\n        this.tableData = this.searchResult;\r\n        this.input2=\"\"\r\n        console.log(\"搜索后的结果\",this.searchResult);\r\n      },\r\n      sureToEdit(values){\r\n        console.log(\"表单数据\",values);\r\n        const id = JSON.parse(localStorage.getItem(\"singleupdateId\"))\r\n        this.$request.put(\"/goods/\"+id,this.form).then(({data})=>{\r\n          console.log(\"更新结果\",data);\r\n          if(data.code===200){\r\n            this.$message.success(\"更新成功\")\r\n          }else{\r\n            this.$message.error(\"更新失败\")\r\n          }\r\n        }).catch((err)=>{console.log(err);})\r\n        setTimeout(()=>{this.getData()},500)\r\n          this.dialogFormVisible = false;\r\n      }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.home{\r\n    width: 93%;\r\n    font-family: \"宋体\";\r\n    .controlSs{\r\n        display: flex;\r\n        margin-right: 24px;\r\n    }\r\n    .price11{\r\n        color: red;\r\n        font-family: \"宋体\";\r\n        font-weight: bold;\r\n    }\r\n    .extraTabs{\r\n      height: 86px;\r\n      display: flex;\r\n      flex-direction: column;\r\n      .searchBox{\r\n        flex: 1;\r\n        margin-top: 10px;\r\n      }\r\n    }\r\n    .changeButton{\r\n      width: 127px;\r\n    }\r\n}\r\n</style>"]}]}