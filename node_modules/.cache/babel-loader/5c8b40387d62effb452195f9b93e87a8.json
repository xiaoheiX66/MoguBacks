{"remainingRequest":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\babel-loader\\lib\\index.js!D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\src\\store\\index.js","dependencies":[{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\src\\store\\index.js","mtime":1642497762627},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\babel.config.js","mtime":1642474497112},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\mushroom\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxwcmFjdGljZUFsbF8yMTEwXFx0aHJlZVN0YWdlXFx2dWVQcm9qZWN0VGVzdFxcdnVlRGF5b2ZUZXN0XFxtdXNocm9vbVxcbm9kZV9tb2R1bGVzXFxAYmFiZWxcXHJ1bnRpbWVcXGhlbHBlcnNcXGVzbVxcYXN5bmNUb0dlbmVyYXRvci5qcyI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuanNvbi5zdHJpbmdpZnkuanMiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCBWdWV4IGZyb20gJ3Z1ZXgnOwppbXBvcnQgcmVxdWVzdCBmcm9tICcuLi91dGlscy9yZXF1ZXN0JzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBBdXRoUm91dGVyIGZyb20gJ0Avcm91dGVyL0F1dGhSb3V0ZXInOwpWdWUudXNlKFZ1ZXgpOwp2YXIgdXNlckluZm8gPSBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidXNlckluZm8iKTsKCnRyeSB7CiAgdXNlckluZm8gPSBKU09OLnBhcnNlKHVzZXJJbmZvKSB8fCB7fTsKfSBjYXRjaCAoZXJyKSB7CiAgdXNlckluZm8gPSB7fTsKfQoKdmFyIHN0b3JlID0gbmV3IFZ1ZXguU3RvcmUoewogIHN0YXRlOiB7CiAgICB1c2VySW5mbzogdXNlckluZm8KICB9LAogIGdldHRlcnM6IHsKICAgIGlzTG9naW46IGZ1bmN0aW9uIGlzTG9naW4oc3RhdGUpIHsKICAgICAgcmV0dXJuICEhc3RhdGUudXNlckluZm8uX2lkOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oc3RhdGUsIHBheWxvYWQpIHsKICAgICAgc3RhdGUudXNlckluZm8gPSBwYXlsb2FkOwogICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgndXNlckluZm8nLCBKU09OLnN0cmluZ2lmeShzdGF0ZS51c2VySW5mbykpOwogICAgfSwKICAgIGxvZ291dDogZnVuY3Rpb24gbG9nb3V0KHN0YXRlKSB7CiAgICAgIHN0YXRlLnVzZXJJbmZvID0ge307CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VySW5mbycpOwogICAgfSwKICAgIGFkZFJvdXRlOiBmdW5jdGlvbiBhZGRSb3V0ZSgpIHsKICAgICAgcm91dGVyLmFkZFJvdXRlKEF1dGhSb3V0ZXIpOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgbG9naW46IGZ1bmN0aW9uIGxvZ2luKGN0eCwgcGF5bG9hZCkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKCkgewogICAgICAgIHZhciBfeWllbGQkcmVxdWVzdCRwb3N0LCBkYXRhOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0LnBvc3QoIi91c2VyL2xvZ2luIiwgcGF5bG9hZCk7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIF95aWVsZCRyZXF1ZXN0JHBvc3QgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgZGF0YSA9IF95aWVsZCRyZXF1ZXN0JHBvc3QuZGF0YTsKCiAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygi6K+35rGC57uT5p6cIixkYXRhKTsKICAgICAgICAgICAgICAgIGlmIChkYXRhLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgICAgICAgICBjdHguY29tbWl0KCdsb2dpbicsIGRhdGEuaW5mb1swXSk7CiAgICAgICAgICAgICAgICAgIGN0eC5jb21taXQoJ2FkZFJvdXRlJyk7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LmFicnVwdCgicmV0dXJuIiwgZGF0YSk7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUpOwogICAgICB9KSkoKTsKICAgIH0KICB9Cn0pOyAvLyDliLfmlrDml7bliqjmgIHmt7vliqDmnYPpmZDot6/nlLEKCmlmIChzdG9yZS5nZXR0ZXJzLmlzTG9naW4pIHsKICBzdG9yZS5jb21taXQoJ2FkZFJvdXRlJyk7Cn0KCmV4cG9ydCBkZWZhdWx0IHN0b3JlOw=="},{"version":3,"sources":["D:/practiceAll_2110/threeStage/vueProjectTest/vueDayofTest/mushroom/src/store/index.js"],"names":["Vue","Vuex","request","router","AuthRouter","use","userInfo","localStorage","getItem","JSON","parse","err","store","Store","state","getters","isLogin","_id","mutations","login","payload","setItem","stringify","logout","removeItem","addRoute","actions","ctx","post","data","code","commit","info"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACAJ,GAAG,CAACK,GAAJ,CAAQJ,IAAR;AAEA,IAAIK,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf;;AACA,IAAI;AACAF,EAAAA,QAAQ,GAAGG,IAAI,CAACC,KAAL,CAAWJ,QAAX,KAAwB,EAAnC;AACH,CAFD,CAEE,OAAOK,GAAP,EAAY;AACVL,EAAAA,QAAQ,GAAG,EAAX;AACH;;AAGA,IAAMM,KAAK,GAAG,IAAIX,IAAI,CAACY,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLR,IAAAA,QAAQ,EAARA;AADK,GADqB;AAI5BS,EAAAA,OAAO,EAAE;AACPC,IAAAA,OADO,mBACCF,KADD,EACO;AACZ,aAAO,CAAC,CAACA,KAAK,CAACR,QAAN,CAAeW,GAAxB;AACH;AAHQ,GAJmB;AAS5BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,KADS,iBACHL,KADG,EACGM,OADH,EACW;AAClBN,MAAAA,KAAK,CAACR,QAAN,GAAiBc,OAAjB;AACAb,MAAAA,YAAY,CAACc,OAAb,CAAqB,UAArB,EAAgCZ,IAAI,CAACa,SAAL,CAAeR,KAAK,CAACR,QAArB,CAAhC;AACH,KAJU;AAKXiB,IAAAA,MALW,kBAKJT,KALI,EAKE;AACTA,MAAAA,KAAK,CAACR,QAAN,GAAiB,EAAjB;AACAC,MAAAA,YAAY,CAACiB,UAAb,CAAwB,UAAxB;AACH,KARU;AASXC,IAAAA,QATW,sBASD;AACNtB,MAAAA,MAAM,CAACsB,QAAP,CAAgBrB,UAAhB;AACH;AAXU,GATiB;AAsB5BsB,EAAAA,OAAO,EAAE;AACDP,IAAAA,KADC,iBACKQ,GADL,EACSP,OADT,EACiB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEClB,OAAO,CAAC0B,IAAR,CAAa,aAAb,EAA2BR,OAA3B,CAFD;;AAAA;AAAA;AAEdS,gBAAAA,IAFc,uBAEdA,IAFc;;AAGtB;AACA,oBAAGA,IAAI,CAACC,IAAL,KAAc,GAAjB,EAAqB;AACjBH,kBAAAA,GAAG,CAACI,MAAJ,CAAW,OAAX,EAAmBF,IAAI,CAACG,IAAL,CAAU,CAAV,CAAnB;AACAL,kBAAAA,GAAG,CAACI,MAAJ,CAAW,UAAX;AACH;;AAPqB,iDAQfF,IARe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASzB;AAVQ;AAtBmB,CAAf,CAAd,C,CAmCD;;AACA,IAAGjB,KAAK,CAACG,OAAN,CAAcC,OAAjB,EAAyB;AACvBJ,EAAAA,KAAK,CAACmB,MAAN,CAAa,UAAb;AACD;;AAED,eAAenB,KAAf","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport request from '../utils/request'\nimport router from '@/router'\nimport AuthRouter from '@/router/AuthRouter'\nVue.use(Vuex)\n\nlet userInfo = localStorage.getItem(\"userInfo\");\ntry {\n    userInfo = JSON.parse(userInfo) || {};\n} catch (err) {\n    userInfo = {};\n}\n\n\n const store = new Vuex.Store({\n  state: {\n    userInfo\n  },\n  getters: {\n    isLogin(state){\n      return !!state.userInfo._id\n  }\n  },\n  mutations: {\n    login(state,payload){\n      state.userInfo = payload;\n      localStorage.setItem('userInfo',JSON.stringify(state.userInfo))\n  },\n  logout(state){\n      state.userInfo = {}\n      localStorage.removeItem('userInfo')\n  },\n  addRoute(){\n      router.addRoute(AuthRouter);\n  }\n  },\n  actions: {\n    async login(ctx,payload){\n      // console.log(\"前台传过的数据\",payload);\n      const { data } = await request.post(\"/user/login\",payload);\n      // console.log(\"请求结果\",data);\n      if(data.code === 200){\n          ctx.commit('login',data.info[0])\n          ctx.commit('addRoute')\n      }\n      return data;\n  }\n  }\n})\n// 刷新时动态添加权限路由\nif(store.getters.isLogin){\n  store.commit('addRoute')\n}\n\nexport default store;"]}]}