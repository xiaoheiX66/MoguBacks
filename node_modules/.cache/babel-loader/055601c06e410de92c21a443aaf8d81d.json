{"remainingRequest":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\babel-loader\\lib\\index.js!D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\eslint-loader\\index.js??ref--14-0!D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\src\\store\\index.js","dependencies":[{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\src\\store\\index.js","mtime":1642497762627},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\babel.config.js","mtime":1642474497112},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"D:\\practiceAll_2110\\threeStage\\vueProjectTest\\vueDayofTest\\MoguBacks\\mushroom\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkQ6XFxwcmFjdGljZUFsbF8yMTEwXFx0aHJlZVN0YWdlXFx2dWVQcm9qZWN0VGVzdFxcdnVlRGF5b2ZUZXN0XFxNb2d1QmFja3NcXG11c2hyb29tXFxub2RlX21vZHVsZXNcXEBiYWJlbFxccnVudGltZVxcaGVscGVyc1xcZXNtXFxhc3luY1RvR2VuZXJhdG9yLmpzIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5qc29uLnN0cmluZ2lmeS5qcyI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IFZ1ZXggZnJvbSAndnVleCc7CmltcG9ydCByZXF1ZXN0IGZyb20gJy4uL3V0aWxzL3JlcXVlc3QnOwppbXBvcnQgcm91dGVyIGZyb20gJ0Avcm91dGVyJzsKaW1wb3J0IEF1dGhSb3V0ZXIgZnJvbSAnQC9yb3V0ZXIvQXV0aFJvdXRlcic7ClZ1ZS51c2UoVnVleCk7CnZhciB1c2VySW5mbyA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ1c2VySW5mbyIpOwoKdHJ5IHsKICB1c2VySW5mbyA9IEpTT04ucGFyc2UodXNlckluZm8pIHx8IHt9Owp9IGNhdGNoIChlcnIpIHsKICB1c2VySW5mbyA9IHt9Owp9Cgp2YXIgc3RvcmUgPSBuZXcgVnVleC5TdG9yZSh7CiAgc3RhdGU6IHsKICAgIHVzZXJJbmZvOiB1c2VySW5mbwogIH0sCiAgZ2V0dGVyczogewogICAgaXNMb2dpbjogZnVuY3Rpb24gaXNMb2dpbihzdGF0ZSkgewogICAgICByZXR1cm4gISFzdGF0ZS51c2VySW5mby5faWQ7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIGxvZ2luOiBmdW5jdGlvbiBsb2dpbihzdGF0ZSwgcGF5bG9hZCkgewogICAgICBzdGF0ZS51c2VySW5mbyA9IHBheWxvYWQ7CiAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VySW5mbycsIEpTT04uc3RyaW5naWZ5KHN0YXRlLnVzZXJJbmZvKSk7CiAgICB9LAogICAgbG9nb3V0OiBmdW5jdGlvbiBsb2dvdXQoc3RhdGUpIHsKICAgICAgc3RhdGUudXNlckluZm8gPSB7fTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3VzZXJJbmZvJyk7CiAgICB9LAogICAgYWRkUm91dGU6IGZ1bmN0aW9uIGFkZFJvdXRlKCkgewogICAgICByb3V0ZXIuYWRkUm91dGUoQXV0aFJvdXRlcik7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICBsb2dpbjogZnVuY3Rpb24gbG9naW4oY3R4LCBwYXlsb2FkKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgdmFyIF95aWVsZCRyZXF1ZXN0JHBvc3QsIGRhdGE7CgogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIF9jb250ZXh0Lm5leHQgPSAyOwogICAgICAgICAgICAgICAgcmV0dXJuIHJlcXVlc3QucG9zdCgiL3VzZXIvbG9naW4iLCBwYXlsb2FkKTsKCiAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgX3lpZWxkJHJlcXVlc3QkcG9zdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICBkYXRhID0gX3lpZWxkJHJlcXVlc3QkcG9zdC5kYXRhOwoKICAgICAgICAgICAgICAgIC8vIGNvbnNvbGUubG9nKCLor7fmsYLnu5PmnpwiLGRhdGEpOwogICAgICAgICAgICAgICAgaWYgKGRhdGEuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICAgIGN0eC5jb21taXQoJ2xvZ2luJywgZGF0YS5pbmZvWzBdKTsKICAgICAgICAgICAgICAgICAgY3R4LmNvbW1pdCgnYWRkUm91dGUnKTsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuYWJydXB0KCJyZXR1cm4iLCBkYXRhKTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0KfSk7IC8vIOWIt+aWsOaXtuWKqOaAgea3u+WKoOadg+mZkOi3r+eUsQoKaWYgKHN0b3JlLmdldHRlcnMuaXNMb2dpbikgewogIHN0b3JlLmNvbW1pdCgnYWRkUm91dGUnKTsKfQoKZXhwb3J0IGRlZmF1bHQgc3RvcmU7"},{"version":3,"sources":["D:/practiceAll_2110/threeStage/vueProjectTest/vueDayofTest/MoguBacks/mushroom/src/store/index.js"],"names":["Vue","Vuex","request","router","AuthRouter","use","userInfo","localStorage","getItem","JSON","parse","err","store","Store","state","getters","isLogin","_id","mutations","login","payload","setItem","stringify","logout","removeItem","addRoute","actions","ctx","post","data","code","commit","info"],"mappings":";;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,IAAP,MAAiB,MAAjB;AACA,OAAOC,OAAP,MAAoB,kBAApB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACA,OAAOC,UAAP,MAAuB,qBAAvB;AACAJ,GAAG,CAACK,GAAJ,CAAQJ,IAAR;AAEA,IAAIK,QAAQ,GAAGC,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAf;;AACA,IAAI;AACAF,EAAAA,QAAQ,GAAGG,IAAI,CAACC,KAAL,CAAWJ,QAAX,KAAwB,EAAnC;AACH,CAFD,CAEE,OAAOK,GAAP,EAAY;AACVL,EAAAA,QAAQ,GAAG,EAAX;AACH;;AAGA,IAAMM,KAAK,GAAG,IAAIX,IAAI,CAACY,KAAT,CAAe;AAC5BC,EAAAA,KAAK,EAAE;AACLR,IAAAA,QAAQ,EAARA;AADK,GADqB;AAI5BS,EAAAA,OAAO,EAAE;AACPC,IAAAA,OADO,mBACCF,KADD,EACO;AACZ,aAAO,CAAC,CAACA,KAAK,CAACR,QAAN,CAAeW,GAAxB;AACH;AAHQ,GAJmB;AAS5BC,EAAAA,SAAS,EAAE;AACTC,IAAAA,KADS,iBACHL,KADG,EACGM,OADH,EACW;AAClBN,MAAAA,KAAK,CAACR,QAAN,GAAiBc,OAAjB;AACAb,MAAAA,YAAY,CAACc,OAAb,CAAqB,UAArB,EAAgCZ,IAAI,CAACa,SAAL,CAAeR,KAAK,CAACR,QAArB,CAAhC;AACH,KAJU;AAKXiB,IAAAA,MALW,kBAKJT,KALI,EAKE;AACTA,MAAAA,KAAK,CAACR,QAAN,GAAiB,EAAjB;AACAC,MAAAA,YAAY,CAACiB,UAAb,CAAwB,UAAxB;AACH,KARU;AASXC,IAAAA,QATW,sBASD;AACNtB,MAAAA,MAAM,CAACsB,QAAP,CAAgBrB,UAAhB;AACH;AAXU,GATiB;AAsB5BsB,EAAAA,OAAO,EAAE;AACDP,IAAAA,KADC,iBACKQ,GADL,EACSP,OADT,EACiB;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAEClB,OAAO,CAAC0B,IAAR,CAAa,aAAb,EAA2BR,OAA3B,CAFD;;AAAA;AAAA;AAEdS,gBAAAA,IAFc,uBAEdA,IAFc;;AAGtB;AACA,oBAAGA,IAAI,CAACC,IAAL,KAAc,GAAjB,EAAqB;AACjBH,kBAAAA,GAAG,CAACI,MAAJ,CAAW,OAAX,EAAmBF,IAAI,CAACG,IAAL,CAAU,CAAV,CAAnB;AACAL,kBAAAA,GAAG,CAACI,MAAJ,CAAW,UAAX;AACH;;AAPqB,iDAQfF,IARe;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AASzB;AAVQ;AAtBmB,CAAf,CAAd,C,CAmCD;;AACA,IAAGjB,KAAK,CAACG,OAAN,CAAcC,OAAjB,EAAyB;AACvBJ,EAAAA,KAAK,CAACmB,MAAN,CAAa,UAAb;AACD;;AAED,eAAenB,KAAf","sourcesContent":["import Vue from 'vue'\nimport Vuex from 'vuex'\nimport request from '../utils/request'\nimport router from '@/router'\nimport AuthRouter from '@/router/AuthRouter'\nVue.use(Vuex)\n\nlet userInfo = localStorage.getItem(\"userInfo\");\ntry {\n    userInfo = JSON.parse(userInfo) || {};\n} catch (err) {\n    userInfo = {};\n}\n\n\n const store = new Vuex.Store({\n  state: {\n    userInfo\n  },\n  getters: {\n    isLogin(state){\n      return !!state.userInfo._id\n  }\n  },\n  mutations: {\n    login(state,payload){\n      state.userInfo = payload;\n      localStorage.setItem('userInfo',JSON.stringify(state.userInfo))\n  },\n  logout(state){\n      state.userInfo = {}\n      localStorage.removeItem('userInfo')\n  },\n  addRoute(){\n      router.addRoute(AuthRouter);\n  }\n  },\n  actions: {\n    async login(ctx,payload){\n      // console.log(\"前台传过的数据\",payload);\n      const { data } = await request.post(\"/user/login\",payload);\n      // console.log(\"请求结果\",data);\n      if(data.code === 200){\n          ctx.commit('login',data.info[0])\n          ctx.commit('addRoute')\n      }\n      return data;\n  }\n  }\n})\n// 刷新时动态添加权限路由\nif(store.getters.isLogin){\n  store.commit('addRoute')\n}\n\nexport default store;"]}]}